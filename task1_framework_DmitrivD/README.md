# –ú–∏–Ω–∏ –≤–µ–±-—Å–ª—É–∂–±–∞ - REST API –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ ‚Ññ1 –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ –±–∞–∑–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤"

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [API Documentation](#api-documentation)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

## –û –ø—Ä–æ–µ–∫—Ç–µ

### –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–±-—Å–ª—É–∂–±—ã –Ω–∞ C# —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ASP.NET Core Minimal API –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã **–∫–æ–Ω–≤–µ–π–µ—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤** (middleware pipeline). –ü—Ä–æ–µ–∫—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ HTTP-–∑–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –æ—Ç –º–æ–º–µ–Ω—Ç–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞.

### –ü—Ä–µ–¥–º–µ—Ç–Ω–∞—è –æ–±–ª–∞—Å—Ç—å

**–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤** - –ø—Ä–æ—Å—Ç–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å –¥–≤—É–º—è –ø—Ä–∞–≤–∏–ª–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:

| –ü–æ–ª–µ | –¢–∏–ø | –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
|------|-----|-------------------|
| Id | Guid | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| Name | string | –ù–µ –ø—É—Å—Ç–æ–µ, –Ω–µ –±–æ–ª–µ–µ 200 —Å–∏–º–≤–æ–ª–æ–≤ |
| Price | decimal | –ù–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ (>= 0) |

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **.NET 8.0** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **ASP.NET Core Minimal API** - –ª—ë–≥–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é API
- **xUnit** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è unit –∏ integration —Ç–µ—Å—Ç–æ–≤
- **ConcurrentDictionary** - –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ –ø–∞–º—è—Ç–∏

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±—â–∞—è —Å—Ö–µ–º–∞ —Å–∏—Å—Ç–µ–º—ã

```
HTTP Request
    ‚Üì
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë   MIDDLEWARE PIPELINE (–ö–æ–Ω–≤–µ–π–µ—Ä)      ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë 1. RequestIdMiddleware                ‚ïë ‚Üê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Request ID
‚ïë    - –°–æ–∑–¥–∞—ë—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∑–∞–ø—Ä–æ—Å–∞    ‚ïë
‚ïë    - –î–æ–±–∞–≤–ª—è–µ—Ç –≤ Items –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫    ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë 2. ErrorHandlingMiddleware            ‚ïë ‚Üê –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚ïë    - –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è     ‚ïë
‚ïë    - –§–æ—Ä–º–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞   ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë 3. TimingAndLogMiddleware             ‚ïë ‚Üê –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚ïë    - –ò–∑–º–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è        ‚ïë
‚ïë    - –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤ –∂—É—Ä–Ω–∞–ª      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    ‚Üì
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë      ENDPOINT HANDLERS (–†–æ—É—Ç—ã)        ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë GET  /api/items         ‚Üí GetAll      ‚ïë
‚ïë GET  /api/items/{id}    ‚Üí GetById     ‚ïë
‚ïë POST /api/items         ‚Üí Create      ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    ‚Üì
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë       BUSINESS LOGIC (–õ–æ–≥–∏–∫–∞)         ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö            ‚ïë
‚ïë - –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏   ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    ‚Üì
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë    DATA ACCESS (–•—Ä–∞–Ω–∏–ª–∏—â–µ)            ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë IItemRepository                       ‚ïë
‚ïë ‚îî‚Üí InMemoryItemRepository             ‚ïë
‚ïë    (ConcurrentDictionary)             ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

### –ü–æ—Ä—è–¥–æ–∫ middleware: –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

–ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ middleware –≤ –∫–æ–Ω–≤–µ–π–µ—Ä–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω:

```csharp
app.UseMiddleware<RequestIdMiddleware>();      // 1Ô∏è‚É£ –ü–ï–†–í–´–ô
app.UseMiddleware<ErrorHandlingMiddleware>();  // 2Ô∏è‚É£ –í–¢–û–†–û–ô
app.UseMiddleware<TimingAndLogMiddleware>();   // 3Ô∏è‚É£ –¢–†–ï–¢–ò–ô
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞:**

1. **RequestIdMiddleware –ø–µ—Ä–≤—ã–π** ‚úÖ
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Request ID –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ
   - –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
   - –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞, Request ID –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω

2. **ErrorHandlingMiddleware –≤—Ç–æ—Ä–æ–π** ‚úÖ
   - –û–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤–µ—Å—å –ø–æ—Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ try-catch
   - –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∏—Ö –≤ HTTP-–æ—Ç–≤–µ—Ç—ã
   - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

3. **TimingAndLogMiddleware —Ç—Ä–µ—Ç–∏–π** ‚úÖ
   - –ò–∑–º–µ—Ä—è–µ—Ç —á–∏—Å—Ç–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
   - –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—É—Å–ø–µ—Ö –∏–ª–∏ –æ—à–∏–±–∫–∞)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Request ID –∏–∑ –ø–µ—Ä–≤–æ–≥–æ middleware

### –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

#### 1. Single Responsibility Principle (SRP)

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –æ–¥–Ω—É –∑–∞–¥–∞—á—É:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å |
|-----------|------------------------------|
| RequestIdMiddleware | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ Request ID |
| ErrorHandlingMiddleware | –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ HTTP-–æ—Ç–≤–µ—Ç—ã |
| TimingAndLogMiddleware | –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| InMemoryItemRepository | –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ endpoint | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª |

#### 2. Separation of Concerns (–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π)

**–ß—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–∞—Ä–∫–∞—Å–µ (framework):**
- Middleware pipeline mechanism
- HTTP routing
- Dependency Injection
- Serialization/Deserialization

**–ß—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (application):**
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ middleware (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ç–∞–π–º–µ—Ä, –æ—à–∏–±–∫–∏)
- –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

#### 3. Decorator Pattern

Middleware —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã:
- –î–æ–±–∞–≤–ª—è—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞
- –ú–æ–≥—É—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã
- –ö–æ–º–ø–æ–Ω—É—é—Ç—Å—è –≤ —Ü–µ–ø–æ—á–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "code": "validation",
  "message": "–ü–æ–ª–µ name –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º",
  "requestId": "a1b2c3d4e5f67890"
}
```

**–ö–æ–¥—ã –æ—à–∏–±–æ–∫:**
- `not_found` (404) - —Ä–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- `validation` (400) - –æ—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- `internal_error` (500) - –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

### –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `ConcurrentDictionary` –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç race conditions –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö:

```csharp
private readonly ConcurrentDictionary<Guid, Item> _items = new();
```

–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–ª–∏–µ–Ω—Ç–∞–º–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [.NET 8.0 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)
- –õ—é–±–æ–π HTTP-–∫–ª–∏–µ–Ω—Ç: curl, Postman, –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ .NET

```bash
dotnet --version
# –û–∂–∏–¥–∞–µ—Ç—Å—è: 8.0.x –∏–ª–∏ –≤—ã—à–µ
```

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
cd task1_framework
```

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
dotnet build
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Build succeeded.
    0 Warning(s)
    0 Error(s)
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
dotnet run
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
info: Microsoft.Hosting.Lifetime[14]
      Now listening on: http://localhost:5000
info: Microsoft.Hosting.Lifetime[0]
      Application started. Press Ctrl+C to shut down.
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:5000**

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
curl http://localhost:5000/api/items
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
[]
```

## API Documentation

### Base URL

```
http://localhost:5000/api
```

### Endpoints

#### 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã

```http
GET /api/items
```

**–û—Ç–≤–µ—Ç 200 OK:**
```json
[
  {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "name": "–ù–æ—É—Ç–±—É–∫ Lenovo",
    "price": 45999.99
  },
  {
    "id": "6ba7b810-9dad-11d1-80b4-00c04fd430c8",
    "name": "–ú—ã—à—å Logitech",
    "price": 1299.00
  }
]
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –≠–ª–µ–º–µ–Ω—Ç—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –∏–º–µ–Ω–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ)
- –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤, –µ—Å–ª–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–µ—Ç

---

#### 2. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ ID

```http
GET /api/items/{id}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL:**
- `id` (guid, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–æ–≤–∞—Ä–∞

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl http://localhost:5000/api/items/550e8400-e29b-41d4-a716-446655440000
```

**–û—Ç–≤–µ—Ç 200 OK:**
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "–ù–æ—É—Ç–±—É–∫ Lenovo",
  "price": 45999.99
}
```

**–û—Ç–≤–µ—Ç 404 Not Found:**
```json
{
  "code": "not_found",
  "message": "–≠–ª–µ–º–µ–Ω—Ç —Å ID 550e8400-e29b-41d4-a716-446655440000 –Ω–µ –Ω–∞–π–¥–µ–Ω",
  "requestId": "abc123def456"
}
```

---

#### 3. –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä

```http
POST /api/items
Content-Type: application/json
```

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "name": "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Keychron K2",
  "price": 8999.00
}
```

**–ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
- `name`: –Ω–µ –ø—É—Å—Ç–æ–µ, –Ω–µ –±–æ–ª–µ–µ 200 —Å–∏–º–≤–æ–ª–æ–≤
- `price`: >= 0

**–û—Ç–≤–µ—Ç 201 Created:**
```json
{
  "id": "7c9e6679-7425-40de-944b-e07fc1f90ae7",
  "name": "–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ Keychron K2",
  "price": 8999.00
}
```

**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞:**
```
Location: /api/items/7c9e6679-7425-40de-944b-e07fc1f90ae7
X-Request-Id: abc123def456
```

**–û—Ç–≤–µ—Ç 400 Bad Request (–≤–∞–ª–∏–¥–∞—Ü–∏—è):**
```json
{
  "code": "validation",
  "message": "–ü–æ–ª–µ name –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º",
  "requestId": "abc123def456"
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞

```bash
# 1. –°–æ–∑–¥–∞—ë–º —Ç–æ–≤–∞—Ä
curl -X POST http://localhost:5000/api/items \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ú–æ–Ω–∏—Ç–æ—Ä Dell 27\"",
    "price": 25999.00
  }'

# –û—Ç–≤–µ—Ç:
# {
#   "id": "123e4567-e89b-12d3-a456-426614174000",
#   "name": "–ú–æ–Ω–∏—Ç–æ—Ä Dell 27\"",
#   "price": 25999.00
# }

# 2. –ü–æ–ª—É—á–∞–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –ø–æ ID
curl http://localhost:5000/api/items/123e4567-e89b-12d3-a456-426614174000

# 3. –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤
curl http://localhost:5000/api/items
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```bash
# –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä —Å –ø—É—Å—Ç—ã–º –∏–º–µ–Ω–µ–º
curl -X POST http://localhost:5000/api/items \
  -H "Content-Type: application/json" \
  -d '{
    "name": "",
    "price": 100
  }'

# –û—Ç–≤–µ—Ç 400:
# {
#   "code": "validation",
#   "message": "–ü–æ–ª–µ name –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º",
#   "requestId": "def456abc123"
# }

# –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
curl -X POST http://localhost:5000/api/items \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–æ–≤–∞—Ä",
    "price": -100
  }'

# –û—Ç–≤–µ—Ç 400:
# {
#   "code": "validation",
#   "message": "–ü–æ–ª–µ price –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º",
#   "requestId": "ghi789jkl012"
# }
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ID

```bash
# –ó–∞–ø—Ä–æ—Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞
curl http://localhost:5000/api/items/00000000-0000-0000-0000-000000000000

# –û—Ç–≤–µ—Ç 404:
# {
#   "code": "not_found",
#   "message": "–≠–ª–µ–º–µ–Ω—Ç —Å ID 00000000-0000-0000-0000-000000000000 –Ω–µ –Ω–∞–π–¥–µ–Ω",
#   "requestId": "mno345pqr678"
# }
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º Request ID

```bash
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º Request ID
curl http://localhost:5000/api/items \
  -H "X-Request-Id: my-custom-trace-id-12345"

# –í –ª–æ–≥–∞—Ö –∏ –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –Ω–∞—à ID
# –í –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞: X-Request-Id: my-custom-trace-id-12345
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ì—Ä–∞–Ω–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

```bash
# –¢–æ–≤–∞—Ä —Å —Ü–µ–Ω–æ–π 0 (–¥–æ–ø—É—Å—Ç–∏–º–æ)
curl -X POST http://localhost:5000/api/items \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞",
    "price": 0
  }'

# –¢–æ–≤–∞—Ä —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º (–æ—à–∏–±–∫–∞)
curl -X POST http://localhost:5000/api/items \
  -H "Content-Type: application/json" \
  -d "{
    \"name\": \"$(printf 'a%.0s' {1..201})\",
    \"price\": 100
  }"

# –û—Ç–≤–µ—Ç 400:
# {
#   "code": "validation",
#   "message": "–ü–æ–ª–µ name –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 200 —Å–∏–º–≤–æ–ª–æ–≤",
#   "requestId": "stu901vwx234"
# }
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–≤–∞—Ä–æ–≤

```bash
# –°–æ–∑–¥–∞—ë–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ–¥—Ä—è–¥
for i in {1..5}; do
  curl -X POST http://localhost:5000/api/items \
    -H "Content-Type: application/json" \
    -d "{
      \"name\": \"–¢–æ–≤–∞—Ä $i\",
      \"price\": $((i * 100))
    }"
  echo ""
done

# –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫
curl http://localhost:5000/api/items
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 7: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥ —Å jq

–ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [jq](https://stedolan.github.io/jq/):

```bash
# –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ JSON
curl -s http://localhost:5000/api/items | jq '.'

# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
curl -s http://localhost:5000/api/items | jq '.[].name'

# –ü–æ—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
curl -s http://localhost:5000/api/items | jq 'length'
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd Tests
dotnet test
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
Passed! - Failed:  0, Passed: 25, Skipped: 0, Total: 25
```

### –ó–∞–ø—É—Å–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –≤—ã–≤–æ–¥–æ–º

```bash
dotnet test --logger "console;verbosity=detailed"
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

```bash
# –¢–æ–ª—å–∫–æ unit-—Ç–µ—Å—Ç—ã
dotnet test --filter "FullyQualifiedName~ValidationTests"

# –¢–æ–ª—å–∫–æ integration-—Ç–µ—Å—Ç—ã
dotnet test --filter "FullyQualifiedName~IntegrationTests"
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

#### Unit-—Ç–µ—Å—Ç—ã (UnitTests.cs)

**ValidationTests** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
- ‚úÖ –ü—É—Å—Ç–æ–µ –∏–º—è ‚Üí –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –ò–º—è –∏–∑ –ø—Ä–æ–±–µ–ª–æ–≤ ‚Üí –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–∞ ‚Üí –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ –∏–º—è (>200) ‚Üí –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**RepositoryTests** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:
- ‚úÖ GetAll –Ω–∞ –ø—É—Å—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- ‚úÖ Create –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç —Å ID
- ‚úÖ GetById –Ω–∞—Ö–æ–¥–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç
- ‚úÖ GetById –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
- ‚úÖ GetAll –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- ‚úÖ GetAll –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)

**ExceptionTests** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π:
- ‚úÖ NotFoundException –∏–º–µ–µ—Ç code "not_found" –∏ status 404
- ‚úÖ ValidationException –∏–º–µ–µ—Ç code "validation" –∏ status 400

#### Integration-—Ç–µ—Å—Ç—ã (IntegrationTests.cs)

**API Endpoints** - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª HTTP –∑–∞–ø—Ä–æ—Å–æ–≤:
- ‚úÖ GET /api/items –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- ‚úÖ POST —Å–æ–∑–¥–∞—ë—Ç —ç–ª–µ–º–µ–Ω—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 201 —Å Location
- ‚úÖ GET /api/items/{id} –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
- ‚úÖ GET /api/items/{id} –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404 –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
- ‚úÖ POST —Å –ø—É—Å—Ç—ã–º name –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400 —Å ErrorResponse
- ‚úÖ POST —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π price –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400
- ‚úÖ ErrorResponse –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç requestId
- ‚úÖ –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-Request-Id
- ‚úÖ POST —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º Request-Id —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π: —Å–æ–∑–¥–∞–Ω–∏–µ ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ ID ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ –ò–º—è —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ —Ç—Ä–∏–º–º–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –¶–µ–Ω–∞ 0 –¥–æ–ø—É—Å—Ç–∏–º–∞
- ‚úÖ –ò–º—è –¥–ª–∏–Ω–æ–π >200 –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–æ–∫—Ä—ã—Ç–∏–µ |
|-----------|----------|
| –í–∞–ª–∏–¥–∞—Ü–∏—è | 100% |
| Repository | 100% |
| –ò—Å–∫–ª—é—á–µ–Ω–∏—è | 100% |
| API Endpoints | 95%+ |
| Middleware | –ö–æ—Å–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ integration-—Ç–µ—Å—Ç—ã |

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

–ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –≤ –∂—É—Ä–Ω–∞–ª–µ:

```
info: Pr1.MinWebService.Middlewares.TimingAndLogMiddleware[0]
      –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω. requestId=abc123def456 method=GET path=/api/items status=200 timeMs=15
```

**–ü–æ–ª—è –ª–æ–≥–∞:**
- `requestId` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞
- `method` - HTTP –º–µ—Ç–æ–¥ (GET, POST –∏ —Ç.–¥.)
- `path` - –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞
- `status` - HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥ –æ—Ç–≤–µ—Ç–∞
- `timeMs` - –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

**–£—Å–ø–µ—à–Ω—ã–π GET –∑–∞–ø—Ä–æ—Å:**
```
info: TimingAndLogMiddleware[0]
      –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω. requestId=550e8400e29b41d4a716446655440000 method=GET path=/api/items status=200 timeMs=5
```

**–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```
warn: ErrorHandlingMiddleware[0]
      –û—à–∏–±–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. requestId=6ba7b8109dad11d180b400c04fd430c8 code=validation
info: TimingAndLogMiddleware[0]
      –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω. requestId=6ba7b8109dad11d180b400c04fd430c8 method=POST path=/api/items status=400 timeMs=3
```

**–≠–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω:**
```
warn: ErrorHandlingMiddleware[0]
      –û—à–∏–±–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏. requestId=7c9e66797425 40de944be07fc1f90ae7 code=not_found
info: TimingAndLogMiddleware[0]
      –ó–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω. requestId=7c9e66797425 40de944be07fc1f90ae7 method=GET path=/api/items/00000000-0000-0000-0000-000000000000 status=404 timeMs=1
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–õ–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —á–µ—Ä–µ–∑ `dotnet run`. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- **Serilog** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **ELK Stack** (Elasticsearch, Logstash, Kibana) - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- **Seq** - –ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
- **Application Insights** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ Azure

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### 1. –ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏ –∑–∞–≤–∏—Å–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (—Ç–æ, —á—Ç–æ –º—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º):
- –ü–æ—Ä—è–¥–æ–∫ middleware –≤ –∫–æ–Ω–≤–µ–π–µ—Ä–µ
- –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–Ω–µ–ø—É—Å—Ç–æ–µ –∏–º—è, –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–∞)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConcurrentDictionary vs –æ–±—ã—á–Ω—ã–π Dictionary

**–ó–∞–≤–∏—Å–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (—Ç–æ, —á—Ç–æ –º—ã –∏–∑–º–µ—Ä—è–µ–º):
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (timeMs –≤ –ª–æ–≥–∞—Ö)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö
- –ù–∞–ª–∏—á–∏–µ Request ID –≤ –ª–æ–≥–∞—Ö –∏ –æ—Ç–≤–µ—Ç–∞—Ö

**–ü—Ä–∏–º–µ—Ä –≥–∏–ø–æ—Ç–µ–∑—ã:**
"–ï—Å–ª–∏ –ø–æ–º–µ—Å—Ç–∏—Ç—å ErrorHandlingMiddleware –ü–ï–†–ï–î RequestIdMiddleware, —Ç–æ Request ID –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –≤ –æ—Ç–≤–µ—Ç–∞—Ö –æ–± –æ—à–∏–±–∫–∞—Ö"

### 2. –£–≥—Ä–æ–∑—ã –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

**–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —É–≥—Ä–æ–∑—ã:**
- **–ò—Å—Ç–æ—Ä–∏—è** - –¥–∞–Ω–Ω—ã–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –º–µ–∂–¥—É —Ç–µ—Å—Ç–∞–º–∏ (—Ä–µ—à–µ–Ω–∏–µ: –∏–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ WebApplicationFactory)
- **–°–æ–∑—Ä–µ–≤–∞–Ω–∏–µ** - –Ω–µ—Ç, —Ç–∞–∫ –∫–∞–∫ —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ —Ç–µ—Å—Ç–æ–≤ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–í–Ω–µ—à–Ω–∏–µ —É–≥—Ä–æ–∑—ã:**
- **–≠—Ñ—Ñ–µ–∫—Ç –•–æ—Ç–æ—Ä–Ω–∞** - –Ω–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- **–û–∫—Ä—É–∂–µ–Ω–∏–µ** - —Ç–µ—Å—Ç—ã –º–æ–≥—É—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°

**–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–Ω–∞—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å:**
- InMemory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ë–î (–ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)
- –ü—Ä–æ—Å—Ç–æ–π lock –º–æ–∂–µ—Ç –Ω–µ –≤—ã—è–≤–∏—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏

**–°–º—è–≥—á–µ–Ω–∏–µ —É–≥—Ä–æ–∑:**
- –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ `WebApplicationFactory`
- –¢–µ—Å—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è (20 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
- –Ø–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

### 3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ: –∫–∞—Ä–∫–∞—Å vs –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —è–¥—Ä–µ –∫–∞—Ä–∫–∞—Å–∞ (framework):**
- –ú–µ—Ö–∞–Ω–∏–∑–º middleware pipeline (–ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤, –ø–µ—Ä–µ–¥–∞—á–∞ HttpContext)
- –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º
- –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON
- Dependency Injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –ë–∞–∑–æ–≤—ã–µ HTTP –ø—Ä–∏–º–∏—Ç–∏–≤—ã (Request, Response, Headers)

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (application):**
- **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** - –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ middleware** - –Ω–∞—à–∏ LoggingMiddleware, TimingMiddleware
- **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** - Item, CreateItemRequest, ErrorResponse
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- **Endpoint handlers** - —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ GET/POST –∑–∞–ø—Ä–æ—Å–∞—Ö

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è:**
–ö–∞—Ä–∫–∞—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç _–º–µ—Ö–∞–Ω–∏–∑–º—ã_, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑—É–µ—Ç _–ø–æ–ª–∏—Ç–∏–∫–∏_.

**–ü—Ä–∏–º–µ—Ä:**
- ‚ùå –ü–ª–æ—Ö–æ: –≤–∞–ª–∏–¥–∞—Ü–∏—è "name –Ω–µ –ø—É—Å—Ç–æ–µ" –≤ –∫–∞—Ä–∫–∞—Å–µ (—Å–ª–∏—à–∫–æ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ)
- ‚úÖ –•–æ—Ä–æ—à–æ: –≤–∞–ª–∏–¥–∞—Ü–∏—è "name –Ω–µ –ø—É—Å—Ç–æ–µ" –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ endpoint (–ø–æ–ª–∏—Ç–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- ‚úÖ –•–æ—Ä–æ—à–æ: –º–µ—Ö–∞–Ω–∏–∑–º middleware pipeline –≤ –∫–∞—Ä–∫–∞—Å–µ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º)

### 4. –¢–∏–ø–æ–≤—ã–µ –æ—à–∏–±–∫–∏ –∏ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

1. **God Object** (–ò–∑–±–µ–∂–∞–ª–∏)
   - ‚ùå –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω: –æ–¥–∏–Ω –∫–ª–∞—Å—Å –¥–µ–ª–∞–µ—Ç –≤—Å—ë (–≤–∞–ª–∏–¥–∞—Ü–∏—è + —Ö—Ä–∞–Ω–µ–Ω–∏–µ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ RequestId, ErrorHandling, Timing, Repository

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ middleware**
   - ‚ùå –û—à–∏–±–∫–∞: ErrorHandling –ü–û–°–õ–ï Timing ‚Üí –æ—à–∏–±–∫–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: ErrorHandling –ü–ï–†–ï–î Timing ‚Üí –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Request ID**
   - ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ–ª—å–∑—è —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥ —Å –∑–∞–ø—Ä–æ—Å–æ–º –∫–ª–∏–µ–Ω—Ç–∞
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: RequestIdMiddleware –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ID –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

4. **Race conditions –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**
   - ‚ùå –û–ø–∞—Å–Ω–æ—Å—Ç—å: Dictionary –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚Üí –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: ConcurrentDictionary –¥–ª—è thread-safety

5. **–†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ—à–∏–±–æ–∫**
   - ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –æ–¥–Ω–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON, –¥—Ä—É–≥–∞—è plain text
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: ErrorHandlingMiddleware —É–Ω–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –≤—Å–µ –æ—à–∏–±–∫–∏

6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Location –≤ 201 Created**
   - ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–Ω–∞–µ—Ç, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å
   - ‚úÖ –†–µ—à–µ–Ω–∏–µ: `Location: /api/items/{id}` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –æ—Ç–≤–µ—Ç–∞

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

- ‚úÖ **Middleware as Decorators** - —á–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π
- ‚úÖ **Repository Pattern** - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ **Domain Exceptions** - –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∏ –∫–∞–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ **Request Tracing** - —Å–∫–≤–æ–∑–Ω–æ–π Request ID —á–µ—Ä–µ–∑ –≤—Å—é —Å–∏—Å—Ç–µ–º—É

### 5. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 10 —Ä–∞–∑

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- 10-100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- InMemory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- –î–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

**–ü—Ä–∏ –º–∞—Å—à—Ç–∞–±–µ √ó10 (1000+ RPS):**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö**
   - ‚ùå InMemory Dictionary ‚Üí ‚ùå –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
   - ‚úÖ Redis (–∫—ç—à) + PostgreSQL (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
   - ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

2. **–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å**
   - ‚ùå Simple ConcurrentDictionary ‚Üí ‚ùå —Å—Ç–∞–Ω–µ—Ç bottleneck
   - ‚úÖ Distributed lock (Redis RedLock)
   - ‚úÖ Optimistic concurrency (version fields)

3. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - ‚ùå –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å ‚Üí ‚ùå –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—Å—è
   - ‚úÖ Load Balancer (Nginx/ALB) + N instances
   - ‚úÖ Stateless design (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ! ‚úÖ)

4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - ‚ùå Console logging ‚Üí ‚ùå –Ω–µ—á–∏—Ç–∞–µ–º–æ –ø—Ä–∏ N —Å–µ—Ä–≤–µ—Ä–∞—Ö
   - ‚úÖ Centralized logging (ELK/Seq/DataDog)
   - ‚úÖ Distributed tracing (OpenTelemetry)

5. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
   - ‚úÖ Connection pooling –¥–ª—è –ë–î
   - ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å (—É–∂–µ async/await ‚úÖ)
   - ‚úÖ Rate limiting (–∑–∞—â–∏—Ç–∞ –æ—Ç DDoS)

6. **API —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**
   - ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è: `GET /api/items?page=1&size=20`
   - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: `GET /api/items?minPrice=100&maxPrice=1000`
   - ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: `GET /api/items?sort=price:desc`
   - ‚úÖ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API: `/api/v2/items`

**–ß—Ç–æ –ù–ï –∏–∑–º–µ–Ω–∏—Ç—Å—è:**

- ‚úÖ –ü–æ—Ä—è–¥–æ–∫ middleware –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–µ–º –∂–µ
- ‚úÖ –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤–∞–∂–µ–Ω
- ‚úÖ Request ID —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –≤–∞–∂–Ω—ã–º
- ‚úÖ –ü—Ä–∏–Ω—Ü–∏–ø SRP –æ—Å—Ç–∞—ë—Ç—Å—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Ö–æ–¥–µ –æ—Å—Ç–∞—ë—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π

**–í—ã–≤–æ–¥:**
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (middleware pipeline, –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫, Request ID) –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è —Ö–æ—Ä–æ—à–æ. –ü—Ä–æ–±–ª–µ–º—ã –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (InMemory ‚Üí Database, –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä ‚Üí –∫–ª–∞—Å—Ç–µ—Ä), –Ω–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
task1_framework/
‚îú‚îÄ‚îÄ Program.cs                           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pipeline
‚îú‚îÄ‚îÄ Pr1.MinWebService.csproj             # –§–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ appsettings.json                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ Domain/                              # –ú–æ–¥–µ–ª–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ Item.cs                          # –ú–æ–¥–µ–ª—å —Ç–æ–≤–∞—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ CreateItemRequest.cs             # DTO –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ ErrorResponse.cs                 # –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ Errors/                              # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ DomainException.cs               # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îÇ   ‚îú‚îÄ‚îÄ NotFoundException.cs             # 404 –æ—à–∏–±–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ ValidationException.cs           # 400 –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ Middlewares/                         # –ö–æ–Ω–≤–µ–π–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ RequestIdMiddleware.cs           # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Request ID
‚îÇ   ‚îú‚îÄ‚îÄ ErrorHandlingMiddleware.cs       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ TimingAndLogMiddleware.cs        # –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ Services/                            # –ë–∏–∑–Ω–µ—Å-—Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ IItemRepository.cs               # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ InMemoryItemRepository.cs        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
‚îÇ   ‚îî‚îÄ‚îÄ RequestId.cs                     # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è Request ID
‚îÇ
‚îú‚îÄ‚îÄ Properties/
‚îÇ   ‚îî‚îÄ‚îÄ launchSettings.json              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å–∫–∞
‚îÇ
‚îî‚îÄ‚îÄ Tests/                               # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ UnitTests.cs                     # Unit-—Ç–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ IntegrationTests.cs              # Integration-—Ç–µ—Å—Ç—ã
    ‚îî‚îÄ‚îÄ Tests.csproj                     # –§–∞–π–ª —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞

- [ASP.NET Core Middleware](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/middleware/)
- [Minimal APIs overview](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/minimal-apis)
- [xUnit documentation](https://xunit.net/)

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **Swagger/OpenAPI** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
2. **Health checks** - `/health` endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
3. **CORS** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ cross-origin requests
4. **Authentication** - JWT —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
5. **Versioning** - –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API (/api/v1/, /api/v2/)
6. **Caching** - HTTP –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å ETag
7. **Rate Limiting** - –∑–∞—â–∏—Ç–∞ –æ—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ–≥–æ —á–∏—Å–ª–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

## –ê–≤—Ç–æ—Ä—Å—Ç–≤–æ

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–Ω—è—Ç–∏–µ ‚Ññ1**  
–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞: –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ –±–∞–∑–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤  
–ò–Ω—Å—Ç–∏—Ç—É—Ç: –ò–Ω—Å—Ç–∏—Ç—É—Ç –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –∏ –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è  
–ö–∞—Ñ–µ–¥—Ä–∞: –ö–∞—Ñ–µ–¥—Ä–∞ –∏–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è  
–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: –ú–∞–∫–∏–µ–≤—Å–∫–∏–π –°—Ç–∞–Ω–∏—Å–ª–∞–≤ –ï–≤–≥–µ–Ω—å–µ–≤–∏—á  
–°–µ–º–µ—Å—Ç—Ä: 6 —Å–µ–º–µ—Å—Ç—Ä, 2025-2026 –≥–≥

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏.
